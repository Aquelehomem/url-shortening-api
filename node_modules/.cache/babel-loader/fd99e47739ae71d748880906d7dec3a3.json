{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\vaca\\\\Desktop\\\\projetos\\\\react\\\\url-shortening-api-master\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\vaca\\\\Desktop\\\\projetos\\\\react\\\\url-shortening-api-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\vaca\\\\Desktop\\\\projetos\\\\react\\\\url-shortening-api-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./Form.scss';var Form=function Form(_ref){var setStorage=_ref.setStorage;var _useState=useState(),_useState2=_slicedToArray(_useState,2),emptyInput=_useState2[0],setEmptyInput=_useState2[1];function sendLink(_x){return _sendLink.apply(this,arguments);}function _sendLink(){_sendLink=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var link,value,resData,links;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();link=\"https://\".concat(emptyInput);_context.next=4;return fetch(\"https://rel.ink/api/links/?url=\".concat(link),{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({url:link})});case 4:value=_context.sent;_context.next=7;return value.json();case 7:resData=_context.sent;if(!(resData.url[0]===\"Enter a valid URL.\")){_context.next=11;break;}setEmptyInput('');return _context.abrupt(\"return\");case 11:links=[];if(localStorage.getItem('links')===null){links.push({url:resData.url,shortUrl:'rel.ink'+resData.hashid});localStorage.setItem('links',JSON.stringify(links));}else{links=JSON.parse(localStorage.getItem('links'));links.push({url:resData.url,shortUrl:'rel.ink'+resData.hashid});localStorage.setItem('links',JSON.stringify(links));}setStorage(JSON.parse(localStorage.getItem('links')));case 14:case\"end\":return _context.stop();}}},_callee);}));return _sendLink.apply(this,arguments);}return React.createElement(\"form\",{onSubmit:function onSubmit(e){return sendLink(e);}},React.createElement(\"input\",{className:emptyInput===\"\"?\"error\":\"\",onBlur:function onBlur(e){return setEmptyInput(e.target.value);},onChange:function onChange(e){return setEmptyInput(e.target.value);},type:\"text\",placeholder:\"Shorten a link here...\"}),emptyInput===\"\"?React.createElement(\"span\",null,\"Please add a link\"):\"\",React.createElement(\"button\",null,\"Shorten It!\"));};export default Form;","map":{"version":3,"sources":["C:/Users/vaca/Desktop/projetos/react/url-shortening-api-master/src/components/Main/Section1/Form.js"],"names":["React","useState","Form","setStorage","emptyInput","setEmptyInput","sendLink","e","preventDefault","link","fetch","method","headers","body","JSON","stringify","url","value","json","resData","links","localStorage","getItem","push","shortUrl","hashid","setItem","parse","target"],"mappings":"2cAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,MAAO,aAAP,CACA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAkB,IAAhBC,CAAAA,UAAgB,MAAhBA,UAAgB,eACCF,QAAQ,EADT,wCACzBG,UADyB,eACdC,aADc,uBAEfC,CAAAA,QAFe,oIAE9B,iBAAwBC,CAAxB,+IACCA,CAAC,CAACC,cAAF,GACIC,IAFL,mBAEqBL,UAFrB,wBAGiBM,CAAAA,KAAK,0CAAmCD,IAAnC,EAA0C,CAACE,MAAM,CAAC,MAAR,CAC9DC,OAAO,CACP,CACC,eAAgB,kBADjB,CAF8D,CAK9DC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAACC,GAAG,CAACP,IAAL,CAAf,CALyD,CAA1C,CAHtB,QAGKQ,KAHL,qCAWmBA,CAAAA,KAAK,CAACC,IAAN,EAXnB,QAWKC,OAXL,oBAYIA,OAAO,CAACH,GAAR,CAAY,CAAZ,IAAiB,oBAZrB,2BAaEX,aAAa,CAAC,EAAD,CAAb,CAbF,yCAiBKe,KAjBL,CAiBW,EAjBX,CAkBC,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAgC,IAAnC,CAAwC,CACvCF,KAAK,CAACG,IAAN,CAAW,CAACP,GAAG,CAACG,OAAO,CAACH,GAAb,CAAiBQ,QAAQ,CAAC,UAAUL,OAAO,CAACM,MAA5C,CAAX,EACAJ,YAAY,CAACK,OAAb,CAAqB,OAArB,CAA6BZ,IAAI,CAACC,SAAL,CAAeK,KAAf,CAA7B,EACA,CAHD,IAGK,CACJA,KAAK,CAACN,IAAI,CAACa,KAAL,CAAWN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAN,CACAF,KAAK,CAACG,IAAN,CAAW,CAACP,GAAG,CAACG,OAAO,CAACH,GAAb,CAAiBQ,QAAQ,CAAC,UAAUL,OAAO,CAACM,MAA5C,CAAX,EACAJ,YAAY,CAACK,OAAb,CAAqB,OAArB,CAA6BZ,IAAI,CAACC,SAAL,CAAeK,KAAf,CAA7B,EACA,CACDjB,UAAU,CAACW,IAAI,CAACa,KAAL,CAAWN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAD,CAAV,CA1BD,uDAF8B,2CA8B9B,MACC,6BAAM,QAAQ,CAAE,kBAACf,CAAD,QAAKD,CAAAA,QAAQ,CAACC,CAAD,CAAb,EAAhB,EACC,6BAAO,SAAS,CAAEH,UAAU,GAAG,EAAb,CAAgB,OAAhB,CAAwB,EAA1C,CACA,MAAM,CAAE,gBAACG,CAAD,QAAKF,CAAAA,aAAa,CAACE,CAAC,CAACqB,MAAF,CAASX,KAAV,CAAlB,EADR,CAEA,QAAQ,CAAE,kBAACV,CAAD,QAAKF,CAAAA,aAAa,CAACE,CAAC,CAACqB,MAAF,CAASX,KAAV,CAAlB,EAFV,CAGA,IAAI,CAAC,MAHL,CAIA,WAAW,CAAC,wBAJZ,EADD,CAMEb,UAAU,GAAG,EAAb,CAAgB,oDAAhB,CAA+C,EANjD,CAOC,gDAPD,CADD,CAWA,CAzCD,CA2CA,cAAeF,CAAAA,IAAf","sourcesContent":["import React,{useState} from 'react'\r\nimport './Form.scss'\r\nconst Form = ({setStorage}) => {\r\n\tvar [emptyInput,setEmptyInput]=useState()\r\n\tasync function sendLink(e){\r\n\t\te.preventDefault()\r\n\t\tvar link=`https://${emptyInput}`\r\n\t\tvar value=await fetch(`https://rel.ink/api/links/?url=${link}`,{method:'POST',\r\n\t\t\theaders: \r\n\t\t\t{\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody:JSON.stringify({url:link})\r\n\r\n\t\t})\r\n\t\tvar resData=await value.json()\r\n\t\tif(resData.url[0]===\"Enter a valid URL.\"){\r\n\t\t\tsetEmptyInput('')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tvar links=[]\r\n\t\tif(localStorage.getItem('links')===null){\r\n\t\t\tlinks.push({url:resData.url,shortUrl:'rel.ink'+resData.hashid})\r\n\t\t\tlocalStorage.setItem('links',JSON.stringify(links))\t\t\t\r\n\t\t}else{\r\n\t\t\tlinks=JSON.parse(localStorage.getItem('links'))\r\n\t\t\tlinks.push({url:resData.url,shortUrl:'rel.ink'+resData.hashid})\r\n\t\t\tlocalStorage.setItem('links',JSON.stringify(links))\r\n\t\t}\r\n\t\tsetStorage(JSON.parse(localStorage.getItem('links')))\r\n\t}\r\n\treturn (\r\n\t\t<form onSubmit={(e)=>sendLink(e)}>\r\n\t\t\t<input className={emptyInput===\"\"?\"error\":\"\"}\r\n\t\t\tonBlur={(e)=>setEmptyInput(e.target.value)}\r\n\t\t\tonChange={(e)=>setEmptyInput(e.target.value)}\r\n\t\t\ttype=\"text\"\r\n\t\t\tplaceholder=\"Shorten a link here...\"/>\r\n\t\t\t{emptyInput===\"\"?<span>Please add a link</span>:\"\"}\r\n\t\t\t<button>Shorten It!</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default Form"]},"metadata":{},"sourceType":"module"}